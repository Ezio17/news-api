(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(55)},41:function(e,t,a){},42:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(30),r=a.n(l),o=(a(41),a(42),a(14)),c=a(16),i=a(17),m=a(5),d=a.n(m),u=a(15),p=a(18),h=a(20),N=a(8),b=a(9),v=a(11),w=a(10),f=a(12),E=function(e){return fetch(e).then(function(e){return e.json()})},g=a(2),y=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(v.a)(this,Object(w.a)(t).call(this,e))).state={valueTextArea:"",valueInput:""},a.handleChangeInput=a.handleChangeInput.bind(Object(g.a)(Object(g.a)(a))),a.handleChangeTextArea=a.handleChangeTextArea.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(b.a)(t,[{key:"handleChangeInput",value:function(e){this.setState({valueInput:e.target.value})}},{key:"handleChangeTextArea",value:function(e){this.setState({valueTextArea:e.target.value})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},s.a.createElement("div",{className:"modal-dialog",role:"document"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"New news"),s.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},s.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),s.a.createElement("div",{className:"modal-body"},s.a.createElement("form",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"recipient-name",className:"col-form-label"},"Title:"),s.a.createElement("input",{type:"text",className:"form-control",id:"recipient-name",value:this.state.valueInput,onChange:this.handleChangeInput})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"message-text",className:"col-form-label"},"Message:"),s.a.createElement("textarea",{className:"form-control",id:"message-text",value:this.state.valueTextArea,onChange:this.handleChangeTextArea})))),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),s.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:function(){return e.setState({valueInput:"",valueTextArea:""}),e.props.addNews(e.state.valueInput,e.state.valueTextArea,"anonym")}},"Send news")))))))}}]),t}(s.a.Component),O=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(v.a)(this,Object(w.a)(t).call(this,e))).state={valueTextArea:"",valueInput:"",body:""},a.handleChangeInput=a.handleChangeInput.bind(Object(g.a)(Object(g.a)(a))),a.handleChangeTextArea=a.handleChangeTextArea.bind(Object(g.a)(Object(g.a)(a))),a.handleClickOutside=a.handleClickOutside.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(b.a)(t,[{key:"handleChangeInput",value:function(e){this.setState({valueInput:e.target.value})}},{key:"handleChangeTextArea",value:function(e){this.setState({valueTextArea:e.target.value})}},{key:"handleClickOutside",value:function(e){"ModalEdit"===e.target.id&&this.setState({valueTextArea:this.state.valueTextArea,valueInput:this.state.title})}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"modal fade",id:"ModalEdit",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},s.a.createElement("div",{className:"modal-dialog",role:"document"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Edit news"),s.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},s.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),s.a.createElement("div",{className:"modal-body"},s.a.createElement("form",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"recipient-name",className:"col-form-label"},"Title:"),s.a.createElement("input",{type:"text",className:"form-control",id:"recipient-name",value:this.state.valueInput,onChange:this.handleChangeInput})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"message-text",className:"col-form-label"},"Message:"),s.a.createElement("textarea",{className:"form-control",id:"message-text",value:this.state.valueTextArea,onChange:this.handleChangeTextArea})))),s.a.createElement("div",{className:"modal-footer"},s.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return e.setState({valueTextArea:e.state.body,valueInput:e.state.title})}},"Close"),s.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:function(){return e.setState({valueTextArea:e.state.body,valueInput:e.state.title}),e.props.editNews(e.state.valueInput,e.state.valueTextArea)}},"Edit news")))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.body!==t.body||e.title!==t.title?{valueTextArea:e.body,valueInput:e.title,body:e.body,title:e.title}:null}}]),t}(s.a.Component),x=Object(i.b)(function(e){return{title:e.title,body:e.body}})(O),j=function(e){e.mostCommented;var t=e.sortNewNews,a=e.newNews,n=(e.mostCommentedFunc,e.popularNews),l=e.popularNewsText;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-12 text-center title"},s.a.createElement("h1",{className:"title_news"},"News")),s.a.createElement("ul",{className:"nav justify-content-center col-12"},s.a.createElement("li",{className:"nav-item"},s.a.createElement("p",{className:"nav-link sortedItems",onClick:n},l)),s.a.createElement("li",{className:"nav-item"},s.a.createElement("p",{className:"nav-link sortedItems",onClick:a},t))),s.a.createElement("div",{className:"col-12"},s.a.createElement("button",{type:"button",className:"btn btn-secondary offset-4 col-4 offset-md-5 col-md-2 btn btn-primary","data-toggle":"modal","data-target":"#exampleModal","data-whatever":"@mdo"},"Add news")))},C=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(v.a)(this,Object(w.a)(t).call(this,e))).state={sortNewNews:"New news",mostCommented:"Most commented",popularNews:"Popular news",editItem:null,isLoading:!0},a.newNews=function(){var e=Object(h.a)(a.props.items),t="";"Old news"===a.state.sortNewNews?(e.sort(function(e,t){return e.id-t.id}),t="New news"):"New news"===a.state.sortNewNews&&(e.sort(function(e,t){return t.id-e.id}),t="Old news"),a.setState({sortNewNews:t});var n=JSON.stringify(e);localStorage.setItem("news",n),a.props.changeNews(JSON.parse(localStorage.getItem("news")))},a.popularNews=function(){var e=Object(h.a)(a.props.items),t="";"Popular news"===a.state.popularNews?(e.sort(function(e,t){return t.viewer-e.viewer}),t="Unpopular news"):"Unpopular news"===a.state.popularNews&&(e.sort(function(e,t){return e.viewer-t.viewer}),t="Popular news"),a.setState({popularNews:t});var n=JSON.stringify(e);localStorage.setItem("news",n),a.props.changeNews(JSON.parse(localStorage.getItem("news")))},a.viewer=function(e){for(var t=a.props.items,n=0;n<t.length;n++)if(t[n].id===e.id){t[n]=Object(p.a)({},t[n],{viewer:t[n].viewer+1});var s=JSON.stringify(t);localStorage.setItem("news",s),a.props.changeNews(JSON.parse(localStorage.getItem("news"))),a.props.setInput(e.userId)}},a.deletePost=function(e){var t=a.props.items.filter(function(t){return t.id!==+e}),n=JSON.stringify(t);localStorage.setItem("news",n),a.props.changeNews(JSON.parse(localStorage.getItem("news")))},a.addNews=function(e,t,n){var s=Object(h.a)(a.props.items),l=[];if(""!==e&&""!==t){for(var r=0;r<s.length;r++)l.push(s[r].id);var o={title:e,body:t,userId:n,id:Math.max.apply(null,l)+1,viewer:0},c=[].concat(Object(h.a)(a.props.items),[o]),i=JSON.stringify(c);localStorage.setItem("news",i),a.props.changeNews(JSON.parse(localStorage.getItem("news")))}},a.editNews=function(e,t){var n=a.state.editItem,s=a.props.items;if(n.title!==e||n.body!==t){""===e&&(e=n.title),""===t&&(t=n.body),console.log(n.title,"=========="+e);for(var l=0;l<s.length;l++)if(s[l].id===n.id){s[l]=Object(p.a)({},s[l],{title:e,body:t});var r=JSON.stringify(s);localStorage.setItem("news",r),a.props.changeNews(JSON.parse(localStorage.getItem("news")))}}},a.getPost=function(e){a.setState({editItem:e})},a}return Object(f.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark(function e(){var t,a,n,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===JSON.parse(localStorage.getItem("news"))){e.next=4;break}return this.props.changeNews(JSON.parse(localStorage.getItem("news"))),this.setState({isLoading:!1}),e.abrupt("return");case 4:return e.next=6,E("https://jsonplaceholder.typicode.com/posts/");case 6:for(t=e.sent,a=Object(h.a)(t),n=0;n<a.length;n++)a[n].viewer=0;s=JSON.stringify(a),localStorage.setItem("news",s),this.props.changeNews(JSON.parse(localStorage.getItem("news"))),this.setState({isLoading:!1});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.sortNewNews,n=t.mostCommented,l=t.popularNews,r=t.isLoading,c=this.props.items;return r?s.a.createElement("div",{className:"Loader"},s.a.createElement("h1",null,"Loading...")):s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement(j,{sortNewNews:a,mostCommented:n,popularNewsText:l,newNews:this.newNews,popularNews:this.popularNews,mostCommentedFunc:this.mostCommented}),s.a.createElement(y,{addNews:this.addNews}),c.map(function(t){return s.a.createElement("div",{className:"offset-2 com-8 col-md-6 offset-md-0 col-lg-4 box block justify-content-center",key:t.id},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title text-center"},t.title),s.a.createElement("p",{className:"card-text"},t.body),s.a.createElement("div",null,s.a.createElement(o.b,{to:"posts/"+"".concat(t.id),onClick:function(){return e.viewer(t)}},s.a.createElement("p",{className:"btn btn-primary block_views"},"Read more...")),s.a.createElement("p",{className:"block_views offset-2"},"Views: ",t.viewer))),s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("p",{className:"additional w-auto","data-toggle":"modal","data-target":"#ModalEdit","data-whatever":"@mdo",onClick:function(){return e.getPost(t)}},"Edit news"),s.a.createElement("p",{className:"additional w-auto",onClick:function(){return e.deletePost("".concat(t.id))}},"Delete news"))))}),s.a.createElement(x,{editNews:this.editNews})))}}]),t}(s.a.Component),I=Object(i.b)(function(e){return{items:e.news}},function(e){return{changeNews:function(t){e({type:"CHANGE_NEWS",payload:t})},setInput:function(t){e({type:"SET_INPUT",payload:{userId:t}})}}})(C),k=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(v.a)(this,Object(w.a)(t).call(this,e))).state={postComment:[],hidden:!0,authorPost:"",news:""},a.hideComments=Object(u.a)(d.a.mark(function e(){var t,n,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(" https://jsonplaceholder.typicode.com/comments/");case 2:t=e.sent,n=a.props.match.url.match(/\d+/g).join(""),s=t.filter(function(e){return e.postId===+n}),a.setState(function(e){return{hidden:!e.hidden,postComment:s}});case 6:case"end":return e.stop()}},e)})),a}return Object(f.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark(function e(){var t,a,n,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.location.pathname.match(/\d+/g).join(""),a=JSON.parse(localStorage.getItem("news")),n=a.filter(function(e){return e.id===+t}),e.next=5,E("https://jsonplaceholder.typicode.com/users/"+n[0].userId);case 5:s=e.sent,this.setState({authorPost:s.name,news:n[0]});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.postComment,a=e.hidden,n=e.authorPost,l=e.news;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 text-center back"},s.a.createElement(o.b,{to:"/"},s.a.createElement("h1",{className:"back"},"All news"))),s.a.createElement("h1",{className:"col-12 text-center post__title"},"Author:",void 0===n?" Anonym":s.a.createElement(o.b,{to:"/users/".concat(l.userId),className:"authorPost"}," ",n," ")),s.a.createElement("div",{className:"card col-12 col-md-8 post"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h3",{className:"text-center"},l.title),s.a.createElement("p",{className:"text-center"},l.body),s.a.createElement("div",{className:"post__block-comment"},s.a.createElement("p",{className:"post__comment",onClick:this.hideComments},a?"Open comments":"Close comments"))))),s.a.createElement("div",{className:a?"row hidden":"row justify-content-center"},t.map(function(e){return s.a.createElement("div",{className:"card border-dark col-12 col-md-6 col-lg-4 col-xl-3",key:e.id},s.a.createElement(o.b,{to:"/users/"+"".concat(e.id)},s.a.createElement("div",{className:"card-header text-center"},e.email," ")),s.a.createElement("div",{className:"card-body text-dark"},s.a.createElement("h5",{className:"card-title"},e.name),s.a.createElement("p",{className:"card-text"},e.body)))})))}}]),t}(s.a.Component),S=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(v.a)(this,Object(w.a)(t).call(this,e))).state={user:{},addressVisibility:!1,companyVisibility:!1},a.goBack=function(){a.props.history.goBack()},a.companyVisibilityInfo=function(){a.setState(function(e){return{companyVisibility:!e.companyVisibility}})},a.addressVisibilityInfo=function(){a.setState(function(e){return{addressVisibility:!e.addressVisibility}})},a}return Object(f.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("https://jsonplaceholder.typicode.com"+this.props.match.url);case 2:t=e.sent,this.setState({user:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.user,a=e.addressVisibility,n=e.companyVisibility,l={},r={};Object.assign(l,t.address),Object.assign(r,t.company);var c=a?"list-group-item":"list-group-item hidden",i=n?"list-group-item":"list-group-item hidden";return void 0===t.name?s.a.createElement("div",{className:"bg-color"},s.a.createElement("h1",{className:"no-info"},"We haven't information about this user :(")):s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 text-center back"},s.a.createElement(o.b,{to:"/",className:"text-center"},s.a.createElement("h1",{className:"back__text"},"All news / ")),s.a.createElement("h1",{className:"back__text text-center",onClick:this.goBack},"Back")),s.a.createElement("div",{className:"offset-md-3 col-md-6"},s.a.createElement("ul",{className:"list-group  text-center"},s.a.createElement("li",{className:"list-group-item"},"Name: ",t.name),s.a.createElement("li",{className:"list-group-item"},"User name: ",t.username),s.a.createElement("li",{className:"list-group-item"},"Email: ",t.email),s.a.createElement("li",{className:"list-group-item"},"Phone: ",t.phone),s.a.createElement("li",{className:"list-group-item"},"Website: ",t.website),s.a.createElement("li",{className:"list-group-item pointer",onClick:this.addressVisibilityInfo},"Address info"),s.a.createElement("li",{className:c},"City: ",l.city),s.a.createElement("li",{className:c},"Geo: lat ",l.geo.lat,", lng ",l.geo.lng," "),s.a.createElement("li",{className:c},"Street: ",l.street),s.a.createElement("li",{className:c},"Suite: ",l.suite),s.a.createElement("li",{className:c},"Zipcode: ",l.zipcode),s.a.createElement("li",{className:"list-group-item pointer",onClick:this.companyVisibilityInfo},"Company info"),s.a.createElement("li",{className:i},"Name: ",r.name),s.a.createElement("li",{className:i},"Catch Phrase: ",r.catchPhrase),s.a.createElement("li",{className:i},"Bs: ",r.bs)))))}}]),t}(s.a.Component),A=function(e){var t=e.store;return s.a.createElement(i.a,{store:t},s.a.createElement(o.a,{basename:"/news-api/build"},s.a.createElement(c.c,null,s.a.createElement(c.a,{exact:!0,path:"/posts/:id",component:k}),s.a.createElement(c.a,{exact:!0,path:"/users/:id",component:S}),s.a.createElement(c.a,{exact:!0,path:"/",component:I}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=a(22),J=a(33),M=a.n(J),P=a(34),_=a(35),V={news:[],title:"",body:"",author:""},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NEWS":return Object(p.a)({},e,{news:t.payload});case"SET_INPUT":return Object(p.a)({},e,{title:t.payload.title,body:t.payload.body,userId:t.payload.userId});default:return e}},F=Object(T.a)(_.a,P.a,M.a),B=function(){return Object(T.c)(L,F)}();r.a.render(s.a.createElement(A,{store:B}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.70d85308.chunk.js.map